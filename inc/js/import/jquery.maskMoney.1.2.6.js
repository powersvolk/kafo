!function(e){"use strict";function t(e,t){var n="";return e.indexOf("-")>-1&&(e=e.replace("-",""),n="-"),e.indexOf(t.prefix)>-1&&(e=e.replace(t.prefix,"")),e.indexOf(t.suffix)>-1&&(e=e.replace(t.suffix,"")),n+t.prefix+e+t.suffix}function n(e,t){return t.allowEmpty&&""===e?"":t.reverse?r(e,t):a(e,t)}function a(e,n){var a,r,o,l=e.indexOf("-")>-1&&n.allowNegative?"-":"",s=e.replace(/[^0-9]/g,""),c=s.slice(0,s.length-n.precision);return a=i(c,l,n),n.precision>0&&(r=s.slice(s.length-n.precision),o=new Array(n.precision+1-r.length).join(0),a+=n.decimal+o+r),t(a,n)}function r(e,n){var a,r=e.indexOf("-")>-1&&n.allowNegative?"-":"",o=e.replace(n.prefix,"").replace(n.suffix,""),l=o.split(n.decimal)[0],s="";if(""===l&&(l="0"),a=i(l,r,n),n.precision>0){var c=o.split(n.decimal);c.length>1&&(s=c[1]),a+=n.decimal+s;var u=Number.parseFloat(l+"."+s).toFixed(n.precision),f=u.toString().split(n.decimal)[1];a=a.split(n.decimal)[0]+"."+f}return t(a,n)}function i(e,t,n){return e=e.replace(/^0*/g,""),e=e.replace(/\B(?=(\d{3})+(?!\d))/g,n.thousands),""===e&&(e="0"),t+e}e.browser||(e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var o={destroy:function(){return e(this).unbind(".maskMoney"),e.browser.msie&&(this.onpaste=null),this},applyMask:function(t){return n(t,e(this).data("settings"))},mask:function(t){return this.each(function(){var n=e(this);return"number"==typeof t&&n.val(t),n.trigger("mask")})},unmasked:function(){return this.map(function(){var t,n=e(this).val()||"0",a=-1!==n.indexOf("-");return e(n.split(/\D/).reverse()).each(function(e,n){if(n)return t=n,!1}),n=n.replace(/\D/g,""),n=n.replace(new RegExp(t+"$"),"."+t),a&&(n="-"+n),parseFloat(n)})},init:function(a){return a=e.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1,doubleClickSelection:!0,allowEmpty:!1},a),this.each(function(){function r(){var e,t,n,a,r,i=M.get(0),o=0,l=0;return"number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd?(o=i.selectionStart,l=i.selectionEnd):(t=document.selection.createRange())&&t.parentElement()===i&&(a=i.value.length,e=i.value.replace(/\r\n/g,"\n"),n=i.createTextRange(),n.moveToBookmark(t.getBookmark()),r=i.createTextRange(),r.collapse(!1),n.compareEndPoints("StartToEnd",r)>-1?o=l=a:(o=-n.moveStart("character",-a),o+=e.slice(0,o).split("\n").length-1,n.compareEndPoints("EndToEnd",r)>-1?l=a:(l=-n.moveEnd("character",-a),l+=e.slice(0,l).split("\n").length-1))),{start:o,end:l}}function i(){var e=!(M.val().length>=M.attr("maxlength")&&M.attr("maxlength")>=0),t=r(),n=t.start,a=t.end,i=!(t.start===t.end||!M.val().substring(n,a).match(/\d/)),o="0"===M.val().substring(0,1);return e||i||o}function o(e){C.formatOnBlur||M.each(function(t,n){if(n.setSelectionRange)n.focus(),n.setSelectionRange(e,e);else if(n.createTextRange){var a=n.createTextRange();a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",e),a.select()}})}function l(e){var t,a=M.val().length;M.val(n(M.val(),C)),t=M.val().length,C.reverse||(e-=a-t),o(e)}function s(){var e=M.val();C.allowEmpty&&""===e||(C.precision>0&&e.indexOf(C.decimal)<0&&(e+=C.decimal+new Array(C.precision+1).join(0)),M.val(n(e,C)))}function c(){var e=M.val();return C.allowNegative?""!==e&&"-"===e.charAt(0)?e.replace("-",""):"-"+e:e}function u(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function f(e){e=e||window.event;var t=e.which||e.charCode||e.keyCode,n=C.decimal.charCodeAt(0);return void 0!==t&&(!(t<48||t>57)||t===n&&C.reverse?!!i()&&((t!==n||!v())&&(!!C.formatOnBlur||(u(e),g(e),!1))):m(t,e))}function v(){return!d()&&p()}function d(){var e=M.val().length,t=r();return 0===t.start&&t.end===e}function p(){return M.val().indexOf(C.decimal)>-1}function g(e){e=e||window.event;var t,n,a,i,o=e.which||e.charCode||e.keyCode,s="";o>=48&&o<=57&&(s=String.fromCharCode(o)),t=r(),n=t.start,a=t.end,i=M.val(),M.val(i.substring(0,n)+s+i.substring(a,i.length)),l(n+1)}function m(t,n){return 45===t?(M.val(c()),!1):43===t?(M.val(M.val().replace("-","")),!1):13===t||9===t||(!(!e.browser.mozilla||37!==t&&39!==t||0!==n.charCode)||(u(n),!0))}function h(e){e=e||window.event;var t,n,a,i,o,s=e.which||e.charCode||e.keyCode;return void 0!==s&&(t=r(),n=t.start,a=t.end,8!==s&&46!==s&&63272!==s||(u(e),i=M.val(),n===a&&(8===s?""===C.suffix?n-=1:(o=i.split("").reverse().join("").search(/\d/),n=i.length-o-1,a=n+1):a+=1),M.val(i.substring(0,n)+i.substring(a,i.length)),l(n),!1))}function w(){E=M.val(),s();var e,t=M.get(0);C.selectAllOnFocus?t.select():t.createTextRange&&(e=t.createTextRange(),e.collapse(!1),e.select())}function x(){setTimeout(function(){s()},0)}function y(){return(parseFloat("0")/Math.pow(10,C.precision)).toFixed(C.precision).replace(new RegExp("\\.","g"),C.decimal)}function b(n){if(e.browser.msie&&f(n),C.formatOnBlur&&M.val()!==E&&g(n),""===M.val()&&C.allowEmpty)M.val("");else if(""===M.val()||M.val()===t(y(),C))C.allowZero?C.affixesStay?M.val(t(y(),C)):M.val(y()):M.val("");else if(!C.affixesStay){var a=M.val().replace(C.prefix,"").replace(C.suffix,"");M.val(a)}M.val()!==E&&M.change()}function k(){var e,t=M.get(0);C.selectAllOnFocus||(t.setSelectionRange?(e=M.val().length,t.setSelectionRange(e,e)):M.val(M.val()))}function S(){var e,t,n=M.get(0);n.setSelectionRange?(t=M.val().length,e=C.doubleClickSelection?0:t,n.setSelectionRange(e,t)):M.val(M.val())}var C,E,M=e(this);C=e.extend({},a),C=e.extend(C,M.data()),M.data("settings",C),M.unbind(".maskMoney"),M.bind("keypress.maskMoney",f),M.bind("keydown.maskMoney",h),M.bind("blur.maskMoney",b),M.bind("focus.maskMoney",w),M.bind("click.maskMoney",k),M.bind("dblclick.maskMoney",S),M.bind("cut.maskMoney",x),M.bind("paste.maskMoney",x),M.bind("mask.maskMoney",s)})}};e.fn.maskMoney=function(t){return o[t]?o[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.maskMoney"):o.init.apply(this,arguments)}}(window.jQuery||window.Zepto);